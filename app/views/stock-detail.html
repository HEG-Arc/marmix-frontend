<div class="container-fluid">

  <div class="row">
    <div class="col-md-10">
      <h2>{{stock.name}} - Current Price : {{stock.price | number : 2}}</h2>
	<h3>Clock: R{{clock.sim_round}}/D{{clock.sim_day}} - {{clock.state}} ({{clock.timestamp|date:'medium'}})</h3>
      <dl>
        <dt>Quantity</dt>
    	<dd>{{stock.quantity}}</dd>
      </dl>
    </div>
  </div>

  <div class="row">
    <div class="col-md-10">
      <table class="table table-striped table-bordered">
	 <tr>
	   <th>Day</th>
    	   <th>Open</th>
	   <th>High</th>
	   <th>Low</th>
	   <th>Close</th>
	   <th>Volume</th>
	 </tr>
	 <tr ng-repeat="day in stock.history">
	   <td>R{{ day.sim_round }}D{{ day.sim_day }}</td>
	   <td>{{ day.price_open | number : 2 }}</td>
	   <td>{{ day.price_high | number : 2 }}</td>
	   <td>{{ day.price_low | number : 2 }}</td>
	   <td>{{ day.price_close | number : 2 }}</td>
	   <td>{{ day.volume }}</td>
	 </tr>
      </table>
    </div>
  </div>

  <div class="row">
    <div class="col-md-10">
      <h2>Orders placed</h2>
      <table class="table table-striped table-bordered">
	 <tr>
	    <th>Day</th>
	    <th>Type</th>
	    <th>Quantity</th>
	    <th>Price</th>
	 </tr>
	 <tr ng-repeat="order in stock.orders">
<!--
TODO mettre le symbole du stock à la place de l'id
-->
	    <td>R{{order.sim_round}}D{{order.sim_day}}</td>
	    <td>{{order.order_type}}</td>
	    <td>{{order.quantity}}</td>
	    <td>{{order.price | number : 2}}</td>
	 </tr>
      </table>
    </div>
  </div>
<!--
TODO lier les éléments du formulaire avec les données réelles
Contrôler que, lors de l'achat, le solde du compte de l'équipe qui passe l'ordre soit suffisant pour passer cet ordre
Contrôler que, lors de la vente, l'équipe qui passe l'ordre ait la quantité d'actions suffisante pour le faire
-->

  <div class="row">
    <div class="col-md-10">
      <form novalidate class="orderForm">
	<h2>New Order</h2>
	  <label for="buy">Buy</label>
	  <input type="radio"
	    ng-model="buy"
	    name="type"
	    value="buy"
	    id="buy"
	    checked>
	  <label for="sell">Sell</label>
	  <input type="radio"
	    ng-model="sell"
	    name="type"
	    value="sell"
	    id="sell">
        <h3>Quantity</h3>
	  <input type="number"
	      name="quantity"
	      ng-model="quantity"
	      min="1" integer
	      required>
	    <span ng-show="form.quantity.$error.integer">The value is not a valid integer!</span>
        <h3>Price limit</h3>
	  <input type="number"
	      name="priceLimit"
	      ng-model="price"
	      min="1" integer
	      required>
	    <span ng-show="form.priceLimit.$error.integer">The value is not a valid integer!</span>
	<br/>
        <input type="submit" ng-click="update(order)" value="Place Order" />
      </form>
    </div>
  </div>
<!--
TODO inclure un graph avec l'évolution du cours de l'action
"angularjs-chart" a déjà été installé
Doc: http://jtblin.github.io/angular-chart.js/#getting_started
-->
<canvas id="line" class="chart chart-line" data="data"
  labels="labels" legend="true" series="series"
  click="onClick">
</canvas>

  <div class="row">
    <div class="col-md-10">
      <p><a href="#/">Back</a></p>
    </div>
  </div>

</div>
